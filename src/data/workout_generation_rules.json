{
  "version": "1.0.0",
  "description": "Configuration database for workout generation engine - all parameters are easily adjustable",

  "intensity_profiles": {
    "strength": {
      "light": {
        "base_sets": 3,
        "base_reps": 12,
        "base_rest_time_minutes": 0.25,
        "base_weight_percent_tm": 60,
        "base_weight_descriptor": "light"
      },
      "moderate": {
        "base_sets": 3,
        "base_reps": 8,
        "base_rest_time_minutes": 0.33,
        "base_weight_percent_tm": 70,
        "base_weight_descriptor": "moderate"
      },
      "moderate_heavy": {
        "base_sets": 4,
        "base_reps": 6,
        "base_rest_time_minutes": 0.33,
        "base_weight_percent_tm": 75,
        "base_weight_descriptor": "moderate_heavy"
      },
      "heavy": {
        "base_sets": 4,
        "base_reps": 5,
        "base_rest_time_minutes": 0.33,
        "base_weight_percent_tm": 80,
        "base_weight_descriptor": "heavy"
      },
      "max": {
        "base_sets": 5,
        "base_reps": 3,
        "base_rest_time_minutes": 0.5,
        "base_weight_percent_tm": 85,
        "base_weight_descriptor": "max"
      }
    },

    "bodyweight": {
      "light": {
        "base_sets": 3,
        "base_reps": 10,
        "base_rest_time_minutes": 0.17
      },
      "moderate": {
        "base_sets": 3,
        "base_reps": 15,
        "base_rest_time_minutes": 0.25
      },
      "heavy": {
        "base_sets": 4,
        "base_reps": 20,
        "base_rest_time_minutes": 0.33
      },
      "amrap": {
        "base_sets": 3,
        "base_reps": "AMRAP",
        "base_rest_time_minutes": 0.33
      }
    },

    "interval": {
      "light": {
        "base_sets": 3,
        "base_work_time_minutes": 0.17,
        "base_rest_time_minutes": 0.17
      },
      "moderate": {
        "base_sets": 4,
        "base_work_time_minutes": 0.25,
        "base_rest_time_minutes": 0.17
      },
      "heavy": {
        "base_sets": 6,
        "base_work_time_minutes": 0.33,
        "base_rest_time_minutes": 0.17
      },
      "tabata": {
        "base_sets": 8,
        "base_work_time_minutes": 0.33,
        "base_rest_time_minutes": 0.17
      }
    },

    "emom": {
      "light": {
        "base_work_time_minutes": 4,
        "base_target_reps_per_minute": 8
      },
      "moderate": {
        "base_work_time_minutes": 6,
        "base_target_reps_per_minute": 10
      },
      "heavy": {
        "base_work_time_minutes": 6,
        "base_target_reps_per_minute": 12
      }
    },

    "amrap": {
      "light": {
        "base_work_time_minutes": 2,
        "base_target_rounds": 2
      },
      "moderate": {
        "base_work_time_minutes": 4,
        "base_target_rounds": 3
      },
      "heavy": {
        "base_work_time_minutes": 6,
        "base_target_rounds": 4
      }
    },

    "circuit": {
      "light": {
        "base_sets": 3,
        "base_exercises_per_circuit": 3,
        "base_rest_between_circuits_minutes": 0.33
      },
      "moderate": {
        "base_sets": 4,
        "base_exercises_per_circuit": 4,
        "base_rest_between_circuits_minutes": 0.25
      },
      "heavy": {
        "base_sets": 5,
        "base_exercises_per_circuit": 5,
        "base_rest_between_circuits_minutes": 0.17
      }
    },

    "mobility": {
      "light": {
        "base_work_time_minutes": 1
      },
      "moderate": {
        "base_work_time_minutes": 2
      },
      "extended": {
        "base_work_time_minutes": 3
      }
    },

    "flexibility": {
      "light": {
        "base_work_time_minutes": 1
      },
      "moderate": {
        "base_work_time_minutes": 2
      },
      "extended": {
        "base_work_time_minutes": 4
      }
    },

    "cardio": {
      "liss": {
        "base_work_time_minutes": 5,
        "intensity_description": "60-70% max HR, conversational pace"
      },
      "moderate": {
        "base_work_time_minutes": 3,
        "intensity_description": "70-80% max HR, steady state"
      },
      "hiit": {
        "base_work_time_minutes": 2,
        "intensity_description": "85-95% max HR with intervals"
      }
    }
  },

  "progression_schemes": {
    "linear": {
      "name": "Linear Progression",
      "description": "Gradually increase intensity, decrease volume",
      "applies_to": ["strength", "bodyweight"],
      "rules": {
        "reps_delta_per_week": -1,
        "reps_minimum": 3,
        "weight_percent_delta_per_week": 5,
        "rest_time_delta_per_week_minutes": -0.05,
        "rest_time_minimum_minutes": 0.17
      },
      "example_3_weeks": {
        "note": "Starting from intensity_profiles.strength.heavy",
        "week1": {"sets": 4, "reps": 5, "weight_percent_tm": 80, "rest_time_minutes": 1.5},
        "week2": {"sets": 4, "reps": 4, "weight_percent_tm": 85, "rest_time_minutes": 1.25},
        "week3": {"sets": 4, "reps": 3, "weight_percent_tm": 90, "rest_time_minutes": 1.0}
      }
    },

    "density": {
      "name": "Density Progression",
      "description": "Same work in less time OR more work in same time",
      "applies_to": ["emom", "amrap", "circuit", "interval"],
      "rules": {
        "work_time_increase_percent_total": 25,
        "reps_increase_percent_total": 30,
        "rest_time_delta_per_week_minutes": -0.02,
        "rest_time_minimum_minutes": 0.1
      },
      "example_3_weeks": {
        "emom_parent": {
          "note": "Starting from intensity_profiles.emom.moderate (10 minutes base)",
          "week1": {"work_time_minutes": 10},
          "week2": {"work_time_minutes": 12},
          "week3": {"work_time_minutes": 15}
        },
        "emom_sub_exercise": {
          "note": "Starting from 10 base reps",
          "week1": {"reps": 10},
          "week2": {"reps": 11},
          "week3": {"reps": 12}
        },
        "interval": {
          "note": "Rest time decreases each week",
          "week1": {"rest_time_minutes": 0.333},
          "week2": {"rest_time_minutes": 0.25},
          "week3": {"rest_time_minutes": 0.167}
        }
      }
    },

    "wave_loading": {
      "name": "Wave Loading",
      "description": "Undulating intensity - peak middle weeks, deload final week",
      "applies_to": ["strength"],
      "rules": {
        "wave_patterns": {
          "3_weeks": {
            "weight_percent_deltas": [0, 10, 5],
            "reps_deltas": [0, -2, -1]
          },
          "4_weeks": {
            "weight_percent_deltas": [0, 5, 10, 0],
            "reps_deltas": [0, -1, -2, 0]
          },
          "6_weeks": {
            "weight_percent_deltas": [0, 5, 10, 15, 10, 5],
            "reps_deltas": [0, -1, -2, -3, -2, -1]
          }
        }
      },
      "example_3_weeks": {
        "note": "Starting from intensity_profiles.strength.moderate (70% TM, 8 reps base)",
        "week1": {"sets": 4, "reps": 8, "weight_percent_tm": 70},
        "week2": {"sets": 4, "reps": 6, "weight_percent_tm": 80},
        "week3": {"sets": 4, "reps": 7, "weight_percent_tm": 75}
      }
    },

    "volume": {
      "name": "Volume Progression",
      "description": "Increase sets/reps, weight stays constant",
      "applies_to": ["strength", "bodyweight"],
      "rules": {
        "sets_increase_every_n_weeks": 2,
        "sets_maximum": 6,
        "reps_increase_percent_total": 20,
        "weight_percent_delta_per_week": 0
      },
      "example_3_weeks": {
        "note": "Starting from custom base: 3 sets, 8 reps, 65% TM",
        "week1": {"sets": 3, "reps": 8, "weight_percent_tm": 65},
        "week2": {"sets": 4, "reps": 10, "weight_percent_tm": 65},
        "week3": {"sets": 4, "reps": 12, "weight_percent_tm": 65}
      }
    },

    "static": {
      "name": "Static (No Progression)",
      "description": "Same parameters every week - warmups, mobility, recovery",
      "applies_to": ["mobility", "flexibility", "cardio"],
      "rules": {
        "all_deltas_zero": true
      },
      "example_3_weeks": {
        "note": "All weeks identical",
        "week1": {"work_time_minutes": 8},
        "week2": {"work_time_minutes": 8},
        "week3": {"work_time_minutes": 8}
      }
    }
  },

  "experience_modifiers": {
    "complete_beginner": {
      "weight_type": "descriptor",
      "volume_multiplier": 0.7,
      "rest_time_multiplier": 1.3,
      "complexity_filter": ["Beginner"],
      "external_load_filter": ["never", "sometimes"],
      "can_use_set_blocks": false,
      "can_use_wave_loading": false
    },

    "beginner": {
      "weight_type": "descriptor",
      "volume_multiplier": 0.85,
      "rest_time_multiplier": 1.15,
      "complexity_filter": ["Beginner", "Intermediate"],
      "external_load_filter": ["never", "sometimes", "always"],
      "can_use_set_blocks": false,
      "can_use_wave_loading": false
    },

    "intermediate": {
      "weight_type": "percent_tm",
      "volume_multiplier": 1.0,
      "rest_time_multiplier": 1.0,
      "complexity_filter": ["Beginner", "Intermediate", "Advanced"],
      "external_load_filter": ["never", "sometimes", "always"],
      "can_use_set_blocks": false,
      "can_use_wave_loading": false
    },

    "advanced": {
      "weight_type": "percent_tm",
      "volume_multiplier": 1.15,
      "rest_time_multiplier": 0.9,
      "complexity_filter": ["Intermediate", "Advanced"],
      "external_load_filter": ["sometimes", "always"],
      "can_use_set_blocks": true,
      "can_use_wave_loading": true
    },

    "expert": {
      "weight_type": "percent_tm",
      "volume_multiplier": 1.3,
      "rest_time_multiplier": 0.8,
      "complexity_filter": ["Advanced"],
      "external_load_filter": ["always"],
      "can_use_set_blocks": true,
      "can_use_wave_loading": true,
      "can_use_auto_regulation": true
    }
  },

  "time_estimates": {
    "setup_time_minutes": {
      "strength": 1.0,
      "bodyweight": 0.25,
      "interval": 0.5,
      "emom": 0.333,
      "amrap": 0.333,
      "circuit": 0.75,
      "mobility": 0.167,
      "flexibility": 0.167,
      "cardio": 0.5
    },

    "seconds_per_rep": {
      "strength_default_tempo": 4,
      "strength_tempo_eccentric": 2,
      "strength_tempo_pause": 0,
      "strength_tempo_concentric": 2,
      "bodyweight": 3,
      "interval": 3,
      "emom": 3,
      "amrap": 3
    },

    "transition_time_minutes": {
      "between_exercises": 0.5,
      "between_categories": 2.0
    }
  },

  "category_workout_structure": {
    "warmup_categories": ["mobility", "flexibility"],
    "main_strength_categories": ["strength"],
    "volume_categories": ["strength", "bodyweight", "emom", "amrap", "circuit"],
    "metabolic_categories": ["interval", "emom", "amrap", "circuit", "cardio"],
    "cooldown_categories": ["flexibility", "mobility"],

    "category_display_order": [
      "mobility",
      "flexibility",
      "strength",
      "bodyweight",
      "emom",
      "amrap",
      "circuit",
      "interval",
      "cardio"
    ],

    "category_priority_by_goal": {
      "muscle_gain": {
        "first": ["mobility", "flexibility"],
        "primary": ["strength"],
        "secondary": ["bodyweight", "strength"],
        "tertiary": ["emom", "amrap", "circuit"],
        "finisher": ["interval", "amrap"],
        "last": ["flexibility", "cardio"]
      },
      "fat_loss": {
        "first": ["mobility"],
        "primary": ["circuit", "interval"],
        "secondary": ["strength"],
        "tertiary": ["emom", "amrap"],
        "finisher": ["interval"],
        "last": ["flexibility"]
      },
      "athletic_performance": {
        "first": ["mobility"],
        "primary": ["strength"],
        "secondary": ["emom", "circuit"],
        "tertiary": ["interval", "bodyweight"],
        "finisher": ["interval"],
        "last": ["flexibility"]
      },
      "general_fitness": {
        "first": ["mobility"],
        "primary": ["strength", "circuit"],
        "secondary": ["bodyweight", "emom"],
        "tertiary": ["amrap", "interval"],
        "finisher": ["interval"],
        "last": ["flexibility"]
      },
      "rehabilitation": {
        "first": ["mobility", "flexibility"],
        "primary": ["bodyweight", "mobility"],
        "secondary": ["bodyweight"],
        "tertiary": ["flexibility"],
        "finisher": [],
        "last": ["flexibility"]
      },
      "body_recomposition": {
        "first": ["mobility"],
        "primary": ["strength", "circuit"],
        "secondary": ["emom", "interval"],
        "tertiary": ["amrap"],
        "finisher": ["interval"],
        "last": ["flexibility"]
      }
    }
  },

  "duration_constraints": {
    "description": "Session duration determines how many exercises fit in each workout via round-robin selection",
    "20-30": {
      "total_minutes_min": 20,
      "total_minutes_max": 30,
      "include_layers": ["first", "primary", "last"],
      "description": "Short sessions - warmup, main work, cooldown only"
    },
    "30-45": {
      "total_minutes_min": 30,
      "total_minutes_max": 45,
      "include_layers": ["first", "primary", "secondary", "last"],
      "description": "Standard sessions - warmup, main, accessory, cooldown"
    },
    "45-60": {
      "total_minutes_min": 45,
      "total_minutes_max": 60,
      "include_layers": ["first", "primary", "secondary", "tertiary", "last"],
      "description": "Full sessions - warmup, main, accessory, volume, cooldown"
    },
    "60-90": {
      "total_minutes_min": 60,
      "total_minutes_max": 90,
      "include_layers": ["first", "primary", "secondary", "tertiary", "finisher", "last"],
      "description": "Extended sessions - includes finisher work"
    },
    "90+": {
      "total_minutes_min": 90,
      "total_minutes_max": 120,
      "include_layers": ["first", "primary", "secondary", "tertiary", "finisher", "last"],
      "description": "Maximum duration - all category layers available"
    }
  },

  "split_patterns": {
    "description": "Defines day focus patterns for each split type - repeats cyclically to fill all training days",
    "full_body": {
      "pattern": ["Full Body"],
      "description": "Every training day targets all muscle groups",
      "2_days": ["Full Body", "Full Body"],
      "3_days": ["Full Body", "Full Body", "Full Body"],
      "4_days": ["Full Body", "Full Body", "Full Body", "Mobility"],
      "5_days": ["Full Body", "Full Body", "Full Body", "Mobility", "Full Body"],
      "6_days": ["Full Body", "Full Body", "Full Body", "Mobility", "Full Body", "Mobility"],
      "7_days": ["Full Body", "Full Body", "Full Body", "Mobility", "Full Body", "Mobility", "Full Body"]
    },
    "upper_lower": {
      "pattern": ["Upper", "Lower"],
      "description": "Alternates between upper and lower body",
      "2_days": ["Upper", "Lower"],
      "3_days": ["Upper", "Lower", "Mobility"],
      "4_days": ["Upper", "Lower", "Mobility", "Lower"],
      "5_days": ["Upper", "Lower", "Mobility", "Lower", "Upper"],
      "6_days": ["Upper", "Lower", "Mobility", "Lower", "Upper", "Mobility"],
      "7_days": ["Upper", "Lower", "Mobility", "Lower", "Upper", "Mobility", "Lower"]
    },
    "push_pull_legs": {
      "pattern": ["Push", "Pull", "Legs"],
      "description": "3-day cycle: push muscles, pull muscles, legs",
      "3_days": ["Push", "Pull", "Legs"],
      "4_days": ["Push", "Pull", "Legs", "Mobility"],
      "5_days": ["Push", "Pull", "Legs", "Mobility", "Push"],
      "6_days": ["Push", "Pull", "Legs", "Mobility", "Push", "Pull"],
      "7_days": ["Push", "Pull", "Legs", "Mobility", "Push", "Pull", "Mobility"]
    },
    "ulppl": {
      "pattern": ["Upper", "Lower", "Push", "Pull", "Legs"],
      "description": "5-day cycle: upper, lower, push, pull, legs",
      "5_days": ["Upper", "Lower", "Push", "Pull", "Legs"],
      "6_days": ["Upper", "Lower", "Push", "Pull", "Legs", "Mobility"],
      "7_days": ["Upper", "Lower", "Push", "Pull", "Legs", "Mobility", "Mobility"]
    }
  },

  "split_muscle_group_mapping": {
    "description": "Maps split focus types to muscle groups for exercise selection filtering",
    "Full Body": {
      "include_muscle_groups": ["all"],
      "description": "No filtering - select from all muscle groups"
    },
    "Upper": {
      "include_muscle_groups": ["Chest", "Back", "Shoulders", "Biceps", "Triceps", "Core", "Lats", "Rhomboids", "Traps", "Forearms"],
      "exclude_muscle_groups": ["Quadriceps", "Hamstrings", "Glutes", "Calves", "Adductors"],
      "description": "Upper body muscle groups only"
    },
    "Lower": {
      "include_muscle_groups": ["Quadriceps", "Hamstrings", "Glutes", "Calves", "Adductors", "Core"],
      "exclude_muscle_groups": ["Chest", "Back", "Shoulders", "Biceps", "Triceps", "Lats", "Rhomboids", "Traps", "Forearms"],
      "description": "Lower body muscle groups only"
    },
    "Push": {
      "include_muscle_groups": ["Chest", "Shoulders", "Triceps", "Core"],
      "exclude_muscle_groups": ["Back", "Biceps", "Lats", "Rhomboids", "Traps", "Forearms", "Hamstrings"],
      "description": "Pushing muscles - chest, shoulders, triceps"
    },
    "Pull": {
      "include_muscle_groups": ["Back", "Biceps", "Lats", "Rhomboids", "Traps", "Forearms", "Core"],
      "exclude_muscle_groups": ["Chest", "Shoulders", "Triceps", "Quadriceps", "Glutes"],
      "description": "Pulling muscles - back, biceps, rear delts"
    },
    "Legs": {
      "include_muscle_groups": ["Quadriceps", "Hamstrings", "Glutes", "Calves", "Adductors", "Core"],
      "exclude_muscle_groups": ["Chest", "Back", "Shoulders", "Biceps", "Triceps", "Lats", "Rhomboids", "Traps", "Forearms"],
      "description": "All leg muscle groups"
    },
    "Mobility": {
      "include_muscle_groups": ["all"],
      "description": "Mobility-focused day - flexibility, recovery, light movement"
    }
  },

  "compound_exercise_construction": {
    "description": "Configuration for dynamically constructing compound exercises from individual exercises",
    "circuit": {
      "base_constituent_exercises": 4,
      "description": "Number of individual exercises to combine into a circuit",
      "exclude_equipment": ["Barbell"],
      "exclusion_reason": "Barbell exercises require too much setup time for circuit training"
    },
    "emom": {
      "base_constituent_exercises": 2,
      "description": "Number of exercises to alternate in EMOM (Every Minute On the Minute)",
      "exclude_equipment": ["Barbell"],
      "exclusion_reason": "Barbell exercises require too much setup time for EMOM training"
    },
    "amrap": {
      "base_constituent_exercises": 3,
      "description": "Number of exercises in AMRAP circuit (As Many Rounds As Possible)",
      "exclude_equipment": ["Barbell"],
      "exclusion_reason": "Barbell exercises require too much setup time for AMRAP training"
    },
    "interval": {
      "base_constituent_exercises": 2,
      "description": "Number of exercises to alternate in interval training",
      "exclude_equipment": ["Barbell"],
      "exclusion_reason": "Barbell exercises require too much setup time for interval training"
    }
  },

  "exercise_selection_strategy": {
    "description": "Hybrid approach: fixed ratios that fill to duration using round-robin algorithm",
    "strategy": "ratio_based_fill_to_duration",
    "algorithm": "Start from top, add one exercise from each layer in order (first → primary → secondary → tertiary → finisher → last), repeat cycle until duration constraint is met",

    "layer_ratios": {
      "description": "Ideal ratio of exercises per layer - engine adds exercises round-robin to maintain these ratios",
      "first": 1,
      "primary": 2,
      "secondary": 2,
      "tertiary": 1,
      "finisher": 1,
      "last": 1
    },

    "layer_requirements": {
      "description": "Required vs optional layers",
      "must_include": ["first", "primary"],
      "optional": ["secondary", "tertiary", "finisher", "last"],
      "always_end_with_last_if_available": true
    },

    "diversity_rules": {
      "no_duplicate_exercises": true,
      "muscle_diversity_within_day": true,
      "description": "Within a single day, avoid duplicate exercises and aim for muscle group variety"
    },

    "equipment_priority": {
      "description": "When multiple exercises match criteria, prioritize by equipment availability",
      "prefer_available_equipment": true,
      "fallback_to_bodyweight": true
    },

    "filling_algorithm_pseudocode": {
      "step_1": "Initialize empty exercise list for the day",
      "step_2": "Get session_duration (e.g., '45-60') from questionnaire",
      "step_3": "Look up duration_constraints['45-60'] to get: include_layers, total_minutes_min, total_minutes_max",
      "step_4": "Get split focus from day assignment (e.g., 'Push')",
      "step_5": "Look up split_muscle_group_mapping['Push'] to get muscle group filters",
      "step_6": "Get category priorities from category_priority_by_goal[primary_goal] (e.g., muscle_gain → first: [mobility], primary: [strength], etc.)",
      "step_7": "Filter exercise_database.json by: category (from category priorities), muscle_groups (from split focus), equipment (from equipment_access), difficulty (from experience_level)",
      "step_8": "Round-robin add exercises from included layers: first[0], primary[0], secondary[0], tertiary[0], finisher[0], last[0], then first[1], primary[1], etc.",
      "step_9": "After each addition, calculate estimated duration using time_estimates",
      "step_10": "Stop when: (a) total_minutes_max is reached, OR (b) no more exercises available in any layer",
      "step_11": "Ensure 'first' and 'primary' layers have at least 1 exercise each (required)",
      "step_12": "If 'last' layer is included and duration allows, always add at least 1 cooldown exercise"
    },

    "example_45_60_minute_workout": {
      "duration_target": "45-60 minutes",
      "layers_available": ["first", "primary", "secondary", "tertiary", "last"],
      "note": "From duration_constraints['45-60'].include_layers",
      "round_1": {
        "first": "Dynamic Upper Body Warm-up (8 min)",
        "primary": "Bench Press (12 min)",
        "secondary": "Incline Dumbbell Press (10 min)",
        "tertiary": "EMOM Pull-ups (10 min)",
        "last": "Upper Body Stretch (5 min)",
        "total_so_far": "45 minutes"
      },
      "round_2_attempt": {
        "primary": "Overhead Press (12 min)",
        "total_would_be": "57 minutes",
        "action": "CONTINUE - still under 60 minute max"
      },
      "round_2": {
        "primary": "Overhead Press (12 min)",
        "total_so_far": "57 minutes"
      },
      "round_3_attempt": {
        "secondary": "Cable Flyes (8 min)",
        "total_would_be": "65 minutes",
        "action": "STOP - would exceed 60 minute max constraint"
      },
      "final_exercise_count": 6,
      "final_duration": "57 minutes",
      "ratio_achieved": "1:2:1:1:1 (2 primary exercises, 1 each for other layers)"
    }
  }
}
